<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="module" src='../../../element.js?load&expose=E'></script>
    <link rel="stylesheet" href="../../style.css">
    <meta is="e-data" resource=":root|h1 > a" transform='{"title": $.innerHTML & " | Base37 Element"}'>
    <meta is="e-theme" resource="theme">
</head>
<body>
    <header>
        <h1><a href="">Event Binding</a></h1>
    </header>
    <main>
        <button>Click me!</button>
        <fieldset>
            <legend>Individual data pointers for each field.</legend>
            <label>
                <meta is="e-data" resource="main|button|!" apply='transform=$boolean($target)?$number($target)%2B1:1' target="|input">
                <span>Click Count:</span>
                <input name="count">
            </label>
            <label>
                <meta is="e-data" resource='fieldset|input[name="count"]|_' transform="$number($) * 2" target="|input">
                <span>Double:</span>
                <input name="double" readonly>
            </label>
            <label>
                <meta is="e-data" resource="main|button|!click{::1}" apply='transform=$boolean($target)?$number($target)%2B1:1' target="|input">
                <span>Odd Clicks:</span>
                <input name="odd" readonly>
            </label>
            <label>
                <meta is="e-data" resource="main|button|!click{::2}" apply='transform=$boolean($target)?$number($target)%2B1:1' target="|input">
                <span>Even Clicks:</span>
                <input name="even" readonly>
            </label>
            <label>
                <meta is="e-data" resource="main|button|!click{2:5}" apply='transform=$boolean($target)?$number($target)%2B1:1' target="|input">
                <span>Clicks 3-5 only:</span>
                <input name="3to5" readonly>
            </label>
            <label>
                <meta is="e-data" resource="main|button|!click{::7}" apply='transform=$boolean($target)?$number($target)%2B1:1' target="|input">
                <span>Every 7th Click:</span>
                <input name="seventh" readonly>
            </label>
        </fieldset>
        <fieldset>
            <meta is="e-data" resource='main|fieldset input[name="count"]|_' transform='($c:=$?$number($):0;{"count": $, "double": $?$c*2:"", "odd": $?$floor($c/2)+($c%2):""})'>
            <legend>One data pointer for the fieldset.</legend>
            <label>
                <span>Click Count:</span>
                <input name="count" readonly>
            </label>
            <label>
                <span>Double:</span>
                <input name="double" readonly>
            </label>
            <label>
                <span>Odd Clicks:</span>
                <input name="odd" readonly>
            </label>
        </fieldset>
        <fieldset>
            <meta is="e-data" resource='main|fieldset input[name="count"]' transform='($c:=$.value?$number($.value):0;{"count": $.value, "double": $.value?$c*2:"", "odd": $.value?$floor($c/2)+($c%2):""})'>
            <legend>And one data pointer for the fieldset - but binding to the element, not its value.</legend>
            <label>
                <span>Click Count:</span>
                <input name="count" readonly>
            </label>
            <label>
                <span>Double:</span>
                <input name="double" readonly>
            </label>
            <label>
                <span>Odd Clicks:</span>
                <input name="odd" readonly>
            </label>
        </fieldset>        
    </main>
    <footer>
        <meta is="e-content" resource="../../footer.html">
    </footer>
</body>
</html>