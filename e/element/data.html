<style></style>
<template><slot></slot></template>
<script>
    class extends `./abstract/pointer` {

        constructor() {
            super()
            Object.defineProperties(this, {
                _mode: {configurable: false, enumerable: false, writable: false, value: 'data'}
            })
        }

        static get observedAttributes() { return (super.observedAttributes || []).concat('parser') }

        set parser(value) { this.#parser = value }
        get parser() { return this.#parser }

        get data() { return this.#data || {} }

        _apply(result, target) {
            target = Array.isArray(target) ? target : [target]
            let apply = this.apply ?? this.getAttribute('apply'), {flag, transform} = this.e.utils.parseObjectAttribute(apply)
            if (!flag && !transform && apply && !apply.startsWith('{') && !apply.includes('=')) flag = apply.trim()  
            for (const t of target) this.e.sinkData(t, result, flag, transform)
        }

    }
</script>
