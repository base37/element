<style></style>
<template><slot></slot></template>
<script>
    class extends `span` {

        scope
        source
        query
        processor
        jsonata
        #map = {'true': 'true', 'false': 'false', 'null': '', 'undefined': ''}

        sourceElement

        constructor() { super() }

        static get observedAttributes() { return (super.observedAttributes || []).concat('scope', 'source', 'query', 'processor', 'jsonata', 'map') }

        async connectedCallback() {
            const connectElement = this.e._connectElement.bind(this)
            await connectElement()
        }

        toString() { return `${this.sourceElement}` }

        async render(sourceElement) {
            const renderElement = this.e._renderElement.bind(this)
            await renderElement(sourceElement)
        }

        set map(value) { this.#map = {...this.#map, ...(this.e.utils.parseObjectAttribute(value) || {})}}
        get map() { return this.#map }        

    }
</script>